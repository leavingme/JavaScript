$.em.bind("ie.resize",new function(){var a=0,b=0,c=false;this.event=function(e,d){$(window).bind("resize",d)};this.handler=function(){if(!c){c=true;var f=ui_api.get_window_size();var e=f.width;var h=f.height;var d=e;var g=h-46;if(a!=e||b!=h){a=e;b=h;$("#dialog-overlay").css({width:e+"px",height:h+"px"});$.dialog.center();$("#loading, #fatalerror").css({width:d+"px",height:g+"px"});$("#esc-tip").hide();$.lightips.center();$.em.trigger("ie.resize.ok")}c=false}}});$.em.bind("net.status",new function(){this.event=function(b,a){web_api.register_callback(web_api.callback_type.NET_STATUS,a)};this.handler=function(a){a=parseInt(a);if(a){$.em.trigger("net.status.good")}else{$.em.trigger("net.status.bad")}}});$.em.bind("kgms.callback",new function(){this.event=function(name,trigger){web_api.register_callback(web_api.callback_type.KGMS_CORE,trigger)};this.handler=function(json_text){var json=eval("("+json_text+")");$.em.trigger("kgms.callback."+json.type,null,[json])}});$.em.bind("ajax.callback",new function(){this.event=function(b,a){$.ajaxSetup({success:a,error:a})};this.handler=function(b,a){if(a){$.em.trigger("ajax.callback.success",null,[b])}else{$.em.trigger("ajax.callback.error",null,[b])}}});$.em.bind("recall.web",new function(){this.event=function(b,a){web_api.register_callback(web_api.callback_type.RECALL_WEB,a)};this.handler=function(b,c){var a=$var.from_query(c);$.em.trigger("recall.web."+b,null,[a])}});$.em.bind("fullscreen",new function(){this.event=function(name,trigger){web_api.register_callback(web_api.callback_type.FULLSCREEN,trigger)};this.handler=function(){var size=ui_api.get_window_size();var full_w=size.width;var full_h=size.height;var $esc=$("#esc-tip").removeClass("big");var esc_w=0;var esc_h=0;if(get_knowledge("fullscreen")){esc_w=236;esc_h=65;$esc.html("");setTimeout(function(){$esc.hide()},2000)}else{esc_w=236;esc_h=95;$esc.addClass("big").html('<a href="javascript:void(0);" hidefocus="true" class="iknow" onclick="$.am.getApp(\'iknow\').iknow(\'fullscreen\'); $(\'#esc-tip\').hide();"></a>')}$esc.css({width:esc_w+"px",height:esc_h+"px",left:(full_w-esc_w)/2,top:(full_h-esc_h)/2});$esc.show()};var get_knowledge=function(knowledge_point){var result=false;var strKnowledge=client_api.read_file("knowledge");var knowledge={};if(strKnowledge!=""){try{knowledge=eval("("+strKnowledge+")")}catch(e){}}if(knowledge[knowledge_point]){result=true}return result};var set_knowledge=function(knowledge_point){var strKnowledge=client_api.read_file("knowledge");var knowledge={};if(strKnowledge!=""){try{knowledge=eval("("+strKnowledge+")")}catch(e){}}knowledge[knowledge_point]=true;strKnowledge=JSON.stringify(knowledge);client_api.write_file("knowledge",strKnowledge)}});$.em.bind("user.login",new function(){this.event=function(b,a){web_api.register_login_callback(a)}});$.em.bind("user.logout",new function(){this.event=function(b,a){web_api.register_logout_callback(a)}});
